(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{467:function(a,t,s){"use strict";s.r(t);var e=s(25),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"lerna-json"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lerna-json"}},[a._v("#")]),a._v(" lerna.json")]),a._v(" "),s("blockquote",[s("ul",[s("li",[a._v("version , 当前库的版本")]),a._v(" "),s("li",[a._v("npmClient , 允许指定命令使用的 client， 默认是 npm， 可以设置成 yarn")]),a._v(" "),s("li",[a._v("command.publish.ignoreChanges ， 可以指定那些目录或者文件的变更不会被 publish")]),a._v(" "),s("li",[a._v("command.bootstrap.ignore ， 指定不受 bootstrap 命令影响的包")]),a._v(" "),s("li",[a._v("command.bootstrap.npmClientArgs ， 指定默认传给 lerna bootstrap 命令的参数")]),a._v(" "),s("li",[a._v("command.bootstrap.scope ， 指定那些包会受 lerna bootstrap 命令影响")]),a._v(" "),s("li",[a._v("packages ， 指定包所在的目录")])])]),a._v(" "),s("h1",{attrs:{id:"命令行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命令行"}},[a._v("#")]),a._v(" 命令行")]),a._v(" "),s("h2",{attrs:{id:"lerna-add-globs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lerna-add-globs"}},[a._v("#")]),a._v(" lerna add "),s("pkg",[a._v(" [globs...]")])],1),a._v(" "),s("blockquote",[s("p",[a._v("添加一个包的版本为各个包的依赖")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ lerna add <package>[@version] [--dev] [--exact]\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"lerna-bootstrap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lerna-bootstrap"}},[a._v("#")]),a._v(" lerna bootstrap")]),a._v(" "),s("blockquote",[s("ul",[s("li",[a._v("为每个包安装依赖")]),a._v(" "),s("li",[a._v("链接相互依赖的库到具体的目录")]),a._v(" "),s("li",[a._v("执行 npm run prepublish")]),a._v(" "),s("li",[a._v("执行 npm run prepare")])])]),a._v(" "),s("h3",{attrs:{id:"参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),s("h4",{attrs:{id:"hoist"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hoist"}},[a._v("#")]),a._v(" --hoist")]),a._v(" "),s("blockquote",[s("p",[a._v("这个选项，会把共同依赖的库安装到根目录的 node_modules 下， 统一版本")])]),a._v(" "),s("h4",{attrs:{id:"ignore"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ignore"}},[a._v("#")]),a._v(" --ignore")]),a._v(" "),s("blockquote",[s("p",[a._v("忽略部分目录， 不进行安装依赖")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("lerna bootstrap --ignore component-*\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("也可以在 lerna.json 中控制")]),a._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"version"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0.0.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"command"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"bootstrap"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"ignore"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"component-*"')]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("h4",{attrs:{id:"ignore-scripts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ignore-scripts"}},[a._v("#")]),a._v(" --ignore-scripts")]),a._v(" "),s("blockquote",[s("p",[a._v("不执行声明周期脚本命令， 比如 prepare")])]),a._v(" "),s("h4",{attrs:{id:"registry"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#registry"}},[a._v("#")]),a._v(" --registry "),s("url")],1),a._v(" "),s("blockquote",[s("p",[a._v("指定 registry")])]),a._v(" "),s("h4",{attrs:{id:"npm-client"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-client"}},[a._v("#")]),a._v(" --npm-client")]),a._v(" "),s("blockquote",[s("p",[a._v("指定安装用的 npm client")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("lerna bootstrap --npm-client=yarn\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("也可以在 lerna.json 中配置")]),a._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  ...\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"npmClient"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"yarn"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h4",{attrs:{id:"use-workspace"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#use-workspace"}},[a._v("#")]),a._v(" --use-workspace")]),a._v(" "),s("blockquote",[s("p",[a._v("使用 yarn workspace")])]),a._v(" "),s("h4",{attrs:{id:"no-ci"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#no-ci"}},[a._v("#")]),a._v(" --no-ci")]),a._v(" "),s("blockquote",[s("p",[a._v("默认调用 npm ci 替换 npm install , 使用选项修改设置")])]),a._v(" "),s("h2",{attrs:{id:"lerna-changed"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lerna-changed"}},[a._v("#")]),a._v(" lerna changed")]),a._v(" "),s("blockquote",[s("p",[a._v("显示自上次 relase tag 以来有修改的包， 选项通 list")])]),a._v(" "),s("h2",{attrs:{id:"lerna-clean"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lerna-clean"}},[a._v("#")]),a._v(" lerna clean")]),a._v(" "),s("blockquote",[s("p",[a._v("删除各个包下的 node_modules")])]),a._v(" "),s("h2",{attrs:{id:"lerna-create"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lerna-create"}},[a._v("#")]),a._v(" lerna create")]),a._v(" "),s("blockquote",[s("p",[a._v("新建包")])]),a._v(" "),s("h2",{attrs:{id:"lerna-diff-pkgname"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lerna-diff-pkgname"}},[a._v("#")]),a._v(" lerna diff [pkgName]")]),a._v(" "),s("blockquote",[s("p",[a._v("显示自上次 relase tag 以来有修改的包的差异， 执行 git diff")])]),a._v(" "),s("h2",{attrs:{id:"lerna-exec-cmd-args"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lerna-exec-cmd-args"}},[a._v("#")]),a._v(" lerna exec [cmd][args...]")]),a._v(" "),s("blockquote",[s("p",[a._v("在每个包目录下执行任意命令")])]),a._v(" "),s("h2",{attrs:{id:"lerna-info"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lerna-info"}},[a._v("#")]),a._v(" lerna info")]),a._v(" "),s("h2",{attrs:{id:"lerna-init"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lerna-init"}},[a._v("#")]),a._v(" lerna init")]),a._v(" "),s("blockquote",[s("p",[a._v("创建一个新的 lerna 库或者是更新 lerna 版本")])]),a._v(" "),s("h3",{attrs:{id:"参数-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数-2"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),s("h4",{attrs:{id:"independent"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#independent"}},[a._v("#")]),a._v(" --independent")]),a._v(" "),s("blockquote",[s("p",[a._v("独立模式")])]),a._v(" "),s("h4",{attrs:{id:"exeact"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exeact"}},[a._v("#")]),a._v(" --exeact")]),a._v(" "),s("blockquote",[s("p",[a._v("统一模式,所有包保持版本号一致")])]),a._v(" "),s("h2",{attrs:{id:"lerna-link"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lerna-link"}},[a._v("#")]),a._v(" lerna link")]),a._v(" "),s("blockquote",[s("p",[a._v("链接互相引用的库")])]),a._v(" "),s("h2",{attrs:{id:"lerna-impot"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lerna-impot"}},[a._v("#")]),a._v(" lerna impot")]),a._v(" "),s("blockquote",[s("p",[a._v("导入指定 git 仓库的包作为 lerna 管理的包")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("lerna import <path-to-external-repository>\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"lerna-list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lerna-list"}},[a._v("#")]),a._v(" lerna list")]),a._v(" "),s("blockquote",[s("p",[a._v("列举当前 lerna 库包含的包")])]),a._v(" "),s("h2",{attrs:{id:"lerna-publish-bump"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lerna-publish-bump"}},[a._v("#")]),a._v(" lerna publish [bump]")]),a._v(" "),s("blockquote",[s("p",[a._v("发布新的库版本")])]),a._v(" "),s("h3",{attrs:{id:"参数-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数-3"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),s("h5",{attrs:{id:"canary"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#canary"}},[a._v("#")]),a._v(" canary")]),a._v(" "),s("blockquote",[s("p",[a._v("可以用来独立发布每个 commit，不打 tag")])]),a._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[a._v("lerna publish "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("canary\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h4",{attrs:{id:"npm-client-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-client-2"}},[a._v("#")]),a._v(" --npm-client")]),a._v(" "),s("blockquote",[s("p",[a._v("默认 npm")])]),a._v(" "),s("h4",{attrs:{id:"npm-tag"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-tag"}},[a._v("#")]),a._v(" --npm-tag")]),a._v(" "),s("blockquote",[s("p",[a._v("为发布的版本添加 dist-tag")])]),a._v(" "),s("h4",{attrs:{id:"no-verify-access"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#no-verify-access"}},[a._v("#")]),a._v(" --no-verify-access")]),a._v(" "),s("p",[a._v("不进行用户发布的权限校验")]),a._v(" "),s("h4",{attrs:{id:"registry-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#registry-2"}},[a._v("#")]),a._v(" --registry "),s("url")],1),a._v(" "),s("blockquote",[s("p",[a._v("指定 registry")])]),a._v(" "),s("h4",{attrs:{id:"yes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#yes"}},[a._v("#")]),a._v(" --yes")]),a._v(" "),s("p",[a._v("用于 ci 自动输入 yes")]),a._v(" "),s("h2",{attrs:{id:"lerna-run"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lerna-run"}},[a._v("#")]),a._v(" lerna run "),s("script")])])}),[],!1,null,null,null);t.default=r.exports}}]);