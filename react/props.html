<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>props | U世界的V梦想</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="一切皆有可能!">
    
    <link rel="preload" href="/blog-vuepress/assets/css/0.styles.63182871.css" as="style"><link rel="preload" href="/blog-vuepress/assets/js/app.4535e051.js" as="script"><link rel="preload" href="/blog-vuepress/assets/js/2.778d2fa8.js" as="script"><link rel="preload" href="/blog-vuepress/assets/js/7.7c77f53c.js" as="script"><link rel="prefetch" href="/blog-vuepress/assets/js/10.d2b18a5d.js"><link rel="prefetch" href="/blog-vuepress/assets/js/11.c2d489b2.js"><link rel="prefetch" href="/blog-vuepress/assets/js/12.4405f014.js"><link rel="prefetch" href="/blog-vuepress/assets/js/13.9897f59c.js"><link rel="prefetch" href="/blog-vuepress/assets/js/14.bd933c2d.js"><link rel="prefetch" href="/blog-vuepress/assets/js/15.b0808ff0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/16.d977dc29.js"><link rel="prefetch" href="/blog-vuepress/assets/js/17.0e4d2fe0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/18.fbba2dc7.js"><link rel="prefetch" href="/blog-vuepress/assets/js/19.6cd03d48.js"><link rel="prefetch" href="/blog-vuepress/assets/js/20.5898904d.js"><link rel="prefetch" href="/blog-vuepress/assets/js/21.79a4fd7b.js"><link rel="prefetch" href="/blog-vuepress/assets/js/22.6270f2a9.js"><link rel="prefetch" href="/blog-vuepress/assets/js/23.2b3b355d.js"><link rel="prefetch" href="/blog-vuepress/assets/js/24.42539ec5.js"><link rel="prefetch" href="/blog-vuepress/assets/js/25.77342626.js"><link rel="prefetch" href="/blog-vuepress/assets/js/26.266c57d2.js"><link rel="prefetch" href="/blog-vuepress/assets/js/27.25e504ac.js"><link rel="prefetch" href="/blog-vuepress/assets/js/28.aa83c90e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/29.26de06d7.js"><link rel="prefetch" href="/blog-vuepress/assets/js/3.edfa3065.js"><link rel="prefetch" href="/blog-vuepress/assets/js/30.3f3a8c9b.js"><link rel="prefetch" href="/blog-vuepress/assets/js/31.6438b674.js"><link rel="prefetch" href="/blog-vuepress/assets/js/32.6e8407a9.js"><link rel="prefetch" href="/blog-vuepress/assets/js/33.2c741ffe.js"><link rel="prefetch" href="/blog-vuepress/assets/js/34.15377d40.js"><link rel="prefetch" href="/blog-vuepress/assets/js/35.6729fb04.js"><link rel="prefetch" href="/blog-vuepress/assets/js/36.3e108a72.js"><link rel="prefetch" href="/blog-vuepress/assets/js/37.52a93f38.js"><link rel="prefetch" href="/blog-vuepress/assets/js/38.773d206b.js"><link rel="prefetch" href="/blog-vuepress/assets/js/39.97bc89c9.js"><link rel="prefetch" href="/blog-vuepress/assets/js/4.6e64dfe5.js"><link rel="prefetch" href="/blog-vuepress/assets/js/40.d25f8604.js"><link rel="prefetch" href="/blog-vuepress/assets/js/41.42d8ab6b.js"><link rel="prefetch" href="/blog-vuepress/assets/js/42.4608b0fe.js"><link rel="prefetch" href="/blog-vuepress/assets/js/43.cb86f1ad.js"><link rel="prefetch" href="/blog-vuepress/assets/js/44.510d49f7.js"><link rel="prefetch" href="/blog-vuepress/assets/js/45.8a507cdc.js"><link rel="prefetch" href="/blog-vuepress/assets/js/46.b696780b.js"><link rel="prefetch" href="/blog-vuepress/assets/js/47.fbad42a2.js"><link rel="prefetch" href="/blog-vuepress/assets/js/48.56383b2f.js"><link rel="prefetch" href="/blog-vuepress/assets/js/49.bc1afbab.js"><link rel="prefetch" href="/blog-vuepress/assets/js/5.6a73d504.js"><link rel="prefetch" href="/blog-vuepress/assets/js/50.15325e66.js"><link rel="prefetch" href="/blog-vuepress/assets/js/51.d51be4fd.js"><link rel="prefetch" href="/blog-vuepress/assets/js/52.08dcc486.js"><link rel="prefetch" href="/blog-vuepress/assets/js/53.bce9f1f4.js"><link rel="prefetch" href="/blog-vuepress/assets/js/54.555f6feb.js"><link rel="prefetch" href="/blog-vuepress/assets/js/55.d61972d7.js"><link rel="prefetch" href="/blog-vuepress/assets/js/56.eadd87e6.js"><link rel="prefetch" href="/blog-vuepress/assets/js/57.071c3d42.js"><link rel="prefetch" href="/blog-vuepress/assets/js/58.84bc7479.js"><link rel="prefetch" href="/blog-vuepress/assets/js/59.3a4ae366.js"><link rel="prefetch" href="/blog-vuepress/assets/js/6.624a029c.js"><link rel="prefetch" href="/blog-vuepress/assets/js/60.9adbe0fa.js"><link rel="prefetch" href="/blog-vuepress/assets/js/61.66e032c4.js"><link rel="prefetch" href="/blog-vuepress/assets/js/62.c290c2de.js"><link rel="prefetch" href="/blog-vuepress/assets/js/63.b0b456e0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/64.aecf211c.js"><link rel="prefetch" href="/blog-vuepress/assets/js/65.8c5d3171.js"><link rel="prefetch" href="/blog-vuepress/assets/js/66.e4469d2f.js"><link rel="prefetch" href="/blog-vuepress/assets/js/67.de4ff045.js"><link rel="prefetch" href="/blog-vuepress/assets/js/68.1d85caf0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/69.bec2392a.js"><link rel="prefetch" href="/blog-vuepress/assets/js/70.2961552c.js"><link rel="prefetch" href="/blog-vuepress/assets/js/71.cde0e6cc.js"><link rel="prefetch" href="/blog-vuepress/assets/js/72.0bee0552.js"><link rel="prefetch" href="/blog-vuepress/assets/js/73.3014aed3.js"><link rel="prefetch" href="/blog-vuepress/assets/js/74.e255eaf9.js"><link rel="prefetch" href="/blog-vuepress/assets/js/75.b667279c.js"><link rel="prefetch" href="/blog-vuepress/assets/js/76.0d6de82e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/77.56abc049.js"><link rel="prefetch" href="/blog-vuepress/assets/js/78.c6531637.js"><link rel="prefetch" href="/blog-vuepress/assets/js/8.2b17cdb3.js"><link rel="prefetch" href="/blog-vuepress/assets/js/9.8488f879.js">
    <link rel="stylesheet" href="/blog-vuepress/assets/css/0.styles.63182871.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog-vuepress/" class="home-link router-link-active"><!----> <span class="site-name">U世界的V梦想</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog-vuepress/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog-vuepress/web/" class="nav-link">
  Web
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/angular/" class="nav-link">
  Angular
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/vite/" class="nav-link">
  Vite
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/react/" class="nav-link router-link-active">
  React
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/vue-next/" class="nav-link">
  Vue-Next
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/nodejs/" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/typescript/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/interview/" class="nav-link">
  面试
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Go" class="dropdown-title"><span class="title">Go</span> <span class="arrow down"></span></button> <button type="button" aria-label="Go" class="mobile-dropdown-title"><span class="title">Go</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog-vuepress/go/" class="nav-link">
  介绍
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/go-40/" class="nav-link">
  40天
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Flutter" class="dropdown-title"><span class="title">Flutter</span> <span class="arrow down"></span></button> <button type="button" aria-label="Flutter" class="mobile-dropdown-title"><span class="title">Flutter</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog-vuepress/flutter/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/flutter-plugin/" class="nav-link">
  插件
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/flutter-deep/" class="nav-link">
  深入
</a></li></ul></div></div><div class="nav-item"><a href="/blog-vuepress/specification/" class="nav-link">
  规范
</a></div><div class="nav-item"><a href="https://github.com/UvDream" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog-vuepress/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog-vuepress/web/" class="nav-link">
  Web
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/angular/" class="nav-link">
  Angular
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/vite/" class="nav-link">
  Vite
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/react/" class="nav-link router-link-active">
  React
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/vue-next/" class="nav-link">
  Vue-Next
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/nodejs/" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/typescript/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/interview/" class="nav-link">
  面试
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Go" class="dropdown-title"><span class="title">Go</span> <span class="arrow down"></span></button> <button type="button" aria-label="Go" class="mobile-dropdown-title"><span class="title">Go</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog-vuepress/go/" class="nav-link">
  介绍
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/go-40/" class="nav-link">
  40天
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Flutter" class="dropdown-title"><span class="title">Flutter</span> <span class="arrow down"></span></button> <button type="button" aria-label="Flutter" class="mobile-dropdown-title"><span class="title">Flutter</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog-vuepress/flutter/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/flutter-plugin/" class="nav-link">
  插件
</a></li><li class="dropdown-item"><!----> <a href="/blog-vuepress/flutter-deep/" class="nav-link">
  深入
</a></li></ul></div></div><div class="nav-item"><a href="/blog-vuepress/specification/" class="nav-link">
  规范
</a></div><div class="nav-item"><a href="https://github.com/UvDream" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog-vuepress/react/" aria-current="page" class="sidebar-link">React介绍</a></li><li><a href="/blog-vuepress/react/props.html" aria-current="page" class="active sidebar-link">props</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-vuepress/react/props.html#验证-props" class="sidebar-link">验证 props</a></li><li class="sidebar-sub-header"><a href="/blog-vuepress/react/props.html#组合使用-props-和-state" class="sidebar-link">组合使用 props 和 state</a></li><li class="sidebar-sub-header"><a href="/blog-vuepress/react/props.html#props-传递数据" class="sidebar-link">props 传递数据</a></li><li class="sidebar-sub-header"><a href="/blog-vuepress/react/props.html#setstate" class="sidebar-link">setState</a></li><li class="sidebar-sub-header"><a href="/blog-vuepress/react/props.html#父子组件传值" class="sidebar-link">父子组件传值</a></li></ul></li><li><a href="/blog-vuepress/react/vscode.html" class="sidebar-link">React Vscode 插件</a></li><li><a href="/blog-vuepress/react/life.html" class="sidebar-link">生命周期</a></li><li><a href="/blog-vuepress/react/other.html" class="sidebar-link">杂乱的小知识点</a></li><li><a href="/blog-vuepress/react/redux.html" class="sidebar-link">Redux 使用</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="props"><a href="#props" class="header-anchor">#</a> props</h1> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>props 是 React 中很重要的一个概念,使用 props 向 React 组件传递数据,React 组件从 props 中取出数据,然后返回视图</p></div> <h2 id="验证-props"><a href="#验证-props" class="header-anchor">#</a> 验证 props</h2> <p>数据类型验证</p> <ul><li>1.JavaScript 基本数据类型,包括数组,布尔,函数,数字,对象,字符串</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span>array<span class="token punctuation">;</span>

React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span>bool<span class="token punctuation">;</span>

React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span>func<span class="token punctuation">;</span>

React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span>number<span class="token punctuation">;</span>

React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span>object<span class="token punctuation">;</span>

React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span>string<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>2.可以被渲染为子节点的对象,包括数组,字符串,ReactElement(指 jsx 闭合标签)或数组</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span>node<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>3.ReactElement</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span>element<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>4.指定类的实例</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span><span class="token function">instanceOf</span><span class="token punctuation">(</span>Message<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>5.只接受指定的值</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span><span class="token function">oneOf</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;News&quot;</span><span class="token punctuation">,</span>&quot;Photos<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>6.多个对象类型中的一个</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span><span class="token function">oneOfType</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span>string<span class="token punctuation">,</span>
  React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span>number<span class="token punctuation">,</span>
  React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span><span class="token function">instanceOf</span><span class="token punctuation">(</span>Message<span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>7.指定类型组成的数组</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span><span class="token function">arrayOf</span><span class="token punctuation">(</span>React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span>number<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>8.指定类型的属性构成的对象</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span><span class="token function">objectOf</span><span class="token punctuation">(</span>React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span>number<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>9.符合指定格式的对象</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span><span class="token function">shape</span><span class="token punctuation">(</span>
    color<span class="token operator">:</span>React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span>string<span class="token punctuation">,</span>
    fontSize<span class="token operator">:</span>React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span>number
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>10.任意类型加上 isRequire 使其不可为空</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>React<span class="token punctuation">.</span>PropType<span class="token punctuation">.</span>func<span class="token punctuation">.</span>isRequired<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>11.自定义验证器,如果验证失败了需要返回一个 Error 对象.不要直接使用 conosle.error 或抛异常,因为这样的话 oneOfType 会失效</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span>propName<span class="token punctuation">,</span>componentName</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">matchme</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>props<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Validation failed!&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="组合使用-props-和-state"><a href="#组合使用-props-和-state" class="header-anchor">#</a> 组合使用 props 和 state</h2> <p>使用 Counter 组件更新 state 的 value,然后将更新的 state.value 通过 props 传递给 Content 组件
<img src="data:image/png;base64,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" alt="img"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">&quot;prop-types&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Content</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Content组件的props<span class="token operator">:</span>value<span class="token operator">:</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Content<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">.</span>isRequired
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button
          onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              value<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          点击
        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        Counter组件的内部状态<span class="token operator">:</span>
        <span class="token operator">&lt;</span>pre<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Content value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h2 id="props-传递数据"><a href="#props-传递数据" class="header-anchor">#</a> props 传递数据</h2> <p>MessageList=&gt;Message=&gt;Button
<img src="data:image/png;base64,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" alt="img"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">&quot;prop-types&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 按钮</span>
<span class="token keyword">function</span> <span class="token function">Button</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>button style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> background<span class="token operator">:</span> props<span class="token punctuation">.</span>color <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Button<span class="token punctuation">.</span>propType <span class="token operator">=</span> <span class="token punctuation">{</span>
  color<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
  children<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 消息</span>
<span class="token keyword">function</span> <span class="token function">Message</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>props<span class="token punctuation">.</span>text<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>Button color<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>color<span class="token punctuation">}</span><span class="token operator">&gt;</span>删除<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Message<span class="token punctuation">.</span>propType <span class="token operator">=</span> <span class="token punctuation">{</span>
  text<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
  color<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 列表</span>
<span class="token keyword">function</span> <span class="token function">MessageList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> messages <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">&quot;Hello&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">&quot;React&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> children <span class="token operator">=</span> messages<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Message key<span class="token operator">=</span><span class="token punctuation">{</span>key<span class="token punctuation">}</span> text<span class="token operator">=</span><span class="token punctuation">{</span>message<span class="token punctuation">.</span>text<span class="token punctuation">}</span> color<span class="token operator">=</span><span class="token punctuation">{</span>color<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>通过props将color逐层传递给里面的Button组件<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> MessageList<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>通过 getChildContext()方法将 color 放在 context 中,并声明了 childContxtTypes,如果不声明 chilContextTypes,将无法在组件中使用 getChildContext()方法</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>1.state 内部状态或者局部状态</p> <p>2.Props 与 context 则用于组件之间传递数据,使用 props 传递数据简单清晰,但是跨级传递非常麻烦,使用 context 可以跨级传递数据,但是降低组件的复用性,因为这些组件依赖上下文,所以近况使用 context 传递登陆的状态,颜色主题等全局数据</p></div> <h2 id="setstate"><a href="#setstate" class="header-anchor">#</a> setState</h2> <p><img src="data:image/png;base64,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" alt="img"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./style.css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> XiaojiejieItem <span class="token keyword">from</span> <span class="token string">&quot;./XiaojiejieItem&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Xiaojiejie</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      inputVal<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
      list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;基础按摩&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;精油推背&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Fragment<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* jsx注释 */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token comment">/* htmlFor和for冲突 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>label htmlFor<span class="token operator">=</span><span class="token string">&quot;add&quot;</span><span class="token operator">&gt;</span>增加服务<span class="token operator">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input
          id<span class="token operator">=</span><span class="token string">&quot;add&quot;</span>
          value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputVal<span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">inputChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          className<span class="token operator">=</span><span class="token string">&quot;input&quot;</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addList</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>增加服务<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* html解析
                dangerouslySetInnerHTML={{__html:item}} */</span><span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
              <span class="token operator">&lt;</span>li
                key<span class="token operator">=</span><span class="token punctuation">{</span>index <span class="token operator">+</span> item<span class="token punctuation">}</span>
                onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">deleteItem</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">}</span>
                dangerouslySetInnerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> __html<span class="token operator">:</span> item <span class="token punctuation">}</span><span class="token punctuation">}</span>
              <span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token comment">/* {item} */</span><span class="token punctuation">}</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">&lt;</span>XiaojiejieItem key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span> text<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Fragment<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//输入框改变</span>
  <span class="token function">inputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//this.state.inputVal=e.target.value</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      inputVal<span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//新增列表</span>
  <span class="token function">addList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputVal<span class="token punctuation">]</span><span class="token punctuation">,</span>
      inputVal<span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//删除列表项</span>
  <span class="token function">deleteItem</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">;</span>
    list<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//错误写法,严禁操作state里面的值,影响性能</span>
    <span class="token comment">//this.state.list.splice(index,1);</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      list<span class="token operator">:</span> list
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>setSate是一个异步方法</p></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>ul ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">ul</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>ul<span class="token operator">=</span>ul<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
  <span class="token operator">...</span><span class="token punctuation">.</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">addList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// setState异步方法</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputVal<span class="token punctuation">]</span><span class="token punctuation">,</span>
            inputVal<span class="token operator">:</span><span class="token string">''</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ul<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>这样打印的话长度始终少了一个,因为console.log已经执行了,setState才执行完,故长度少1</p> <blockquote><p>解决办法</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">addList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// setState异步方法</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputVal<span class="token punctuation">]</span><span class="token punctuation">,</span>
            inputVal<span class="token operator">:</span><span class="token string">''</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'长度'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>ul<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="父子组件传值"><a href="#父子组件传值" class="header-anchor">#</a> 父子组件传值</h2> <p>父组件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>XiaojiejieItem
        key<span class="token operator">=</span><span class="token punctuation">{</span>index <span class="token operator">+</span> item<span class="token punctuation">}</span>
        <span class="token comment">// 传值</span>
        content<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span>
        index<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span>
        <span class="token comment">// 传递方法</span>
        deleteItem<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">deleteItem</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>子组件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">XiaojiejieItem</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>li onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>content<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//   子组件调用父组件方法</span>
  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">deleteItem</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> XiaojiejieItem<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div> <Vssue title="props"></Vssue></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">6/12/2019, 6:54:13 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog-vuepress/react/" class="prev router-link-active">
        React介绍
      </a></span> <span class="next"><a href="/blog-vuepress/react/vscode.html">
        React Vscode 插件
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog-vuepress/assets/js/app.4535e051.js" defer></script><script src="/blog-vuepress/assets/js/2.778d2fa8.js" defer></script><script src="/blog-vuepress/assets/js/7.7c77f53c.js" defer></script>
  </body>
</html>
